<html>
<head>
	{% block head %}
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
	<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
	<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='styles.light.css') }}">
    <title>{% block title %}{% endblock %} | CYBRANA</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk&display=swap" rel="stylesheet">
	{% endblock %}
	<style type="text/css">
		.image-container {
		  position: relative;
		  width: 300px; /* Set the width of your container */
		  height: 45px; /* Set the height of your container */
		  overflow: hidden;
		}

		.image {
		  position: absolute;
		  top: 0;
		  left: 0;
		  width: 100%;
		  height: 100%;
		  object-fit: contain; /* Maintain aspect ratio and fit within the container */
		  transition: opacity 2.5s ease, transform 2.5s ease; /* Smooth transitions for opacity and transform */
		}

		#image2 {
		  opacity: 0; /* Initially hide the second image */
		  transform: scale(1.2); /* Initial scale for the second image */
		}

		.image-container:hover #image1 {
		  opacity: 0; /* Hide the first image on hover */
		  transform: scale(1.2); /* Scale effect for the first image */
		}

		.image-container:hover #image2 {
		  opacity: 1; /* Show the second image on hover */
		  transform: scale(1); /* Reset the scale for the second image */
		}
	</style>
</head>
<body class="thisIsMyBody">
	<header>
		<div class="left" style="padding: 5px;" class="header-logo">
			<div class="image-container">
			    <img src="{{url_for('static', filename='zeus_blur.png')}}" class="image" id="image1">
			    <img src="{{url_for('static', filename='zeus_transp.png')}}" class="image" id="image2">
			 </div>
		</div>
		<div class="right">

			<nav class="no-mobile">
				<a href="{{url_for('dashboard')}}" id="nav-dashboard">Dashboard</a>
				<a href="{{url_for('dashboard_matrix')}}" id="nav-matrix">CRCF Matrix View</a>
				<a href="{{url_for('dashboard_siem')}}" id="nav-siem">SIEM</a>
				<a href="{{url_for('dashboard_facedb')}}" id="nav-face">FaceDB</a>
				<a href="{{url_for('validate_id')}}" id="nav-id">Validate Government ID</a>
				<a>Light Mode:
				<label class="mdl-switch mdl-js-switch mdl-js-ripple-effect light-mode-switch" for="lightModeSwitch" style="margin-left: 10px!important;">
				  <input type="checkbox" id="lightModeSwitch" class="mdl-switch__input">
				  <span class="mdl-switch__label"></span>
				</label></a>
			</nav>


		</div>
	</header>

	<br/>

	<main>

		{% block content %}{% endblock %}
		
	</main>

	<script type="text/javascript">

		 // Dark mode switch event listener
        const lightModeSwitch = document.getElementById('lightModeSwitch');
        // Add event listener to toggle dark mode when checkbox state changes
		lightModeSwitch.addEventListener('change', function() {
		    toggleDarkMode(); // Toggle dark mode when checkbox state changes
		});

		// Function to toggle light mode
        function toggleDarkMode() {
           const body = document.body;
           const isLightMode = body.classList.contains('light-mode');

           document.body.classList.toggle('light-mode');
           console.log(document.body.classList);

           const mainElements = document.querySelectorAll('main');

           mainElements.forEach(function (mainElement) {
              mainElement.classList.toggle('light-mode');
           });

           const preElements = document.querySelectorAll('pre');

           preElements.forEach(function (preElement) {
              preElement.classList.toggle('light-mode');
           });

           const cardTitleElements = document.querySelectorAll('.card-title');

           cardTitleElements.forEach(function (mainElement) {
              mainElement.classList.toggle('light-mode');
           });

           const cardDescElements = document.querySelectorAll('.card-desc');

           cardDescElements.forEach(function (mainElement) {
              mainElement.classList.toggle('light-mode');
           });

           const activeElements = document.querySelectorAll('.active');

           activeElements.forEach(function (mainElement) {
              mainElement.classList.toggle('light-mode');
           });

           // Select and toggle 'light-mode' class for labels
			const activeLabels = document.querySelectorAll('label');
			activeLabels.forEach(function(label) {
			    label.classList.toggle('light-mode');
			});

			// Select and toggle 'light-mode' class for table rows (tr)
			const activeRows = document.querySelectorAll('tr');
			activeRows.forEach(function(row) {
			    row.classList.toggle('light-mode');
			});

			// Select and toggle 'light-mode' class for forms
			const activeForms = document.querySelectorAll('form');
			activeForms.forEach(function(form) {
			    form.classList.toggle('light-mode');
			});

			// Select and toggle 'light-mode' class for buttons
			const activeButtons = document.querySelectorAll('button');
			activeButtons.forEach(function(button) {
			    button.classList.toggle('light-mode');
			});

			// Select and toggle 'light-mode' class for table cells (td)
			const activeCells = document.querySelectorAll('td');
			activeCells.forEach(function(cell) {
			    cell.classList.toggle('light-mode');
			});

			// Select and toggle 'light-mode' class for elements with class '.dataTables_info'
			const activeDataTablesInfo = document.querySelectorAll('.dataTables_info');
			activeDataTablesInfo.forEach(function(element) {
			    element.classList.toggle('light-mode');
			});

			// Select and toggle 'light-mode' class for input elements
			const activeInputs = document.querySelectorAll('input');
			activeInputs.forEach(function(input) {
			    input.classList.toggle('light-mode');
			});

			// Select and toggle 'light-mode' class for elements with id 'eventsTable_info'
			const activeEventsTableInfo = document.querySelectorAll('#eventsTable_info');
			activeEventsTableInfo.forEach(function(element) {
			    element.classList.toggle('light-mode');
			});

			// Select and toggle 'light-mode' class for elements with class '.paginate_button'
			const activePaginateButtons = document.querySelectorAll('.paginate_button');
			activePaginateButtons.forEach(function(element) {
			    element.classList.toggle('light-mode');
			});

			const colorChangerElements = document.querySelectorAll('.colorChanger');
		        colorChangerElements.forEach(function(element) {
		            element.classList.toggle('light-mode');
		        });

			// Select and toggle 'light-mode' class for elements with class '.card'
			const cards = document.querySelectorAll('.card');
			cards.forEach(function(element) {
			    element.classList.toggle('light-mode');
			});

           const switchSlider = document.querySelector('.light-mode-switch');
           switchSlider.classList.toggle('light-mode');

           const lightModeSwitch = document.querySelector('#lightModeSwitch');

           // Save light mode preference to localStorage
           localStorage.setItem('lightMode', !isLightMode);
        }

        // Function to set initial light mode state
		function setInitialDarkMode() {
		    var isLightMode = localStorage.getItem('lightMode') === 'true';

		    const isDarkMode = localStorage.getItem('lightMode') === 'false';

		    if (!isLightMode && !isDarkMode) {
		        isLightMode = true;
		    }

		    const body = document.body;
		    if (isLightMode) {
		        document.querySelector('#lightModeSwitch').checked = true;

		        if (!document.querySelector('.light-mode-switch').classList.contains('light-mode')) {
		            document.querySelector('.light-mode-switch').classList.add('light-mode');
		        }
		        body.classList.add('light-mode');

		        const mainElements = document.querySelectorAll('main');
		        mainElements.forEach(function(mainElement) {
		            mainElement.classList.add('light-mode');
		        });

		        const preElements = document.querySelectorAll('pre');
		        preElements.forEach(function(preElement) {
		            preElement.classList.add('light-mode');
		        });

		        const cardTitleElements = document.querySelectorAll('.card-title');
		        cardTitleElements.forEach(function(mainElement) {
		            mainElement.classList.add('light-mode');
		        });

		        const cardDescElements = document.querySelectorAll('.card-desc');
		        cardDescElements.forEach(function(mainElement) {
		            mainElement.classList.add('light-mode');
		        });

		        const activeElements = document.querySelectorAll('.active');
		        activeElements.forEach(function(mainElement) {
		            mainElement.classList.add('light-mode');
		        });

		        // Select and toggle 'light-mode' class for labels
		        const activeLabels = document.querySelectorAll('label');
		        activeLabels.forEach(function(label) {
		            label.classList.toggle('light-mode');
		        });

		        // Select and toggle 'light-mode' class for table rows (tr)
		        const activeRows = document.querySelectorAll('tr');
		        activeRows.forEach(function(row) {
		            row.classList.toggle('light-mode');
		        });

		        // Select and toggle 'light-mode' class for forms
		        const activeForms = document.querySelectorAll('form');
		        activeForms.forEach(function(form) {
		            form.classList.toggle('light-mode');
		        });

		        // Select and toggle 'light-mode' class for buttons
		        const activeButtons = document.querySelectorAll('button');
		        activeButtons.forEach(function(button) {
		            button.classList.toggle('light-mode');
		        });

		        // Select and toggle 'light-mode' class for table cells (td)
		        const activeCells = document.querySelectorAll('td');
		        activeCells.forEach(function(cell) {
		            cell.classList.toggle('light-mode');
		        });

		        // Select and toggle 'light-mode' class for elements with class '.dataTables_info'
		        const activeDataTablesInfo = document.querySelectorAll('.dataTables_info');
		        activeDataTablesInfo.forEach(function(element) {
		            element.classList.toggle('light-mode');
		        });

		        const colorChangerElements = document.querySelectorAll('.colorChanger');
		        colorChangerElements.forEach(function(element) {
		            element.classList.toggle('light-mode');
		        });

		        // Select and toggle 'light-mode' class for input elements
		        const activeInputs = document.querySelectorAll('input');
		        activeInputs.forEach(function(input) {
		            input.classList.toggle('light-mode');
		        });

		        // Select and toggle 'light-mode' class for elements with id 'eventsTable_info'
		        const activeEventsTableInfo = document.querySelectorAll('#eventsTable_info');
		        activeEventsTableInfo.forEach(function(element) {
		            element.classList.toggle('light-mode');
		        });

		        // Select and toggle 'light-mode' class for elements with class '.paginate_button'
		        const activePaginateButtons = document.querySelectorAll('.paginate_button');
		        activePaginateButtons.forEach(function(element) {
		            element.classList.toggle('light-mode');
		        });

		        // Select and toggle 'light-mode' class for elements with class '.paginate_button'
		        const cards = document.querySelectorAll('.card');
		        cards.forEach(function(element) {
		            element.classList.toggle('light-mode');
		        });

		        const switchSlider = document.querySelector('.light-mode-switch');
		        switchSlider.classList.toggle('light-mode');

		        if (switchSlider.classList.contains('light-mode') !== lightModeSwitch.checked) {
		            lightModeSwitch.checked = switchSlider.classList.contains('light-mode');
		        }

		        console.log(lightModeSwitch.checked, switchSlider.classList.contains('light-mode'), lightModeSwitch.checked = switchSlider.classList.contains('light-mode'));
		    }
		}

        // Toggle light mode when switch label or slider is clicked
        const lightSwitch = document.querySelector('.light-mode-switch');
        lightSwitch.addEventListener('click', toggleDarkMode);

        setInitialDarkMode();
	</script>

</body>
</html>